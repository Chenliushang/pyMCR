
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>pyMCR: Multivariate Curve Resolution in Python &#8212; pyMCR 0.3 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installation" href="installing.html" />
    <link rel="prev" title="pyMCR: Multivariate Curve Resolution in Python" href="index.html" />
<link rel="stylesheet" href="https://pages.nist.gov/nist-header-footer/css/nist-combined.css">
  <script src="https://code.jquery.com/jquery-1.12.4.min.js" type="text/javascript"></script>
  <script src="https://pages.nist.gov/nist-header-footer/js/nist-header-footer.js" type="text/javascript" defer="defer"></script>


<script type="text/javascript" src="https://pages.nist.gov/leaveNotice/js/jquery.leaveNotice-nist.min.js"></script>
<script>
$(document).ready(function(){
  // Mark external (non-nist.gov) A tags with class "external"
  //If the adress start with https and ends with nist.gov
  var re_nist = new RegExp('^https?:\/\/((^\/)*\.)*nist\\.gov(\/|$)');
  //Regex to find address that start with https
  var re_absolute_address = new RegExp('^((https?:)?\/\/)');
  $("a").each(function(){
    var url=$(this).attr('href');
    if(re_nist.test(url) || !re_absolute_address.test(url)){
      $(this).addClass('local');
    }else{
      //This a href appears to be external, so tag it
      $(this).addClass('external');
    }
  });
  // Add leaveNotice to external A elements
  $('a.external').leaveNotice();
});
</script>
<link rel="stylesheet" type="text/css" href="https://pages.nist.gov/leaveNotice/css/jquery.leaveNotice.css" />


  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="installing.html" title="Installation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="pyMCR: Multivariate Curve Resolution in Python"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pyMCR 0.3 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <a class="reference external image-reference" href="https://travis-ci.org/CCampJr/pyMCR"><img alt="Travis branch" src="https://travis-ci.org/CCampJr/pyMCR.svg?branch=0.3.X" /></a>
<a class="reference external image-reference" href="https://ci.appveyor.com/project/CCampJr/pyMCR"><img alt="AppVeyor branch" src="https://ci.appveyor.com/api/projects/status/ajld1bj7jo4oweio/branch/0.3.X?svg=true" /></a>
<a class="reference external image-reference" href="https://codecov.io/gh/CCampJr/pyMCR"><img alt="Codecov branch" src="https://img.shields.io/codecov/c/github/CCampJr/pyMCR/0.3.X.svg" /></a>
<a class="reference external image-reference" href="https://pypi.org/project/pyMCR/"><img alt="PyPI - Python Version" src="https://img.shields.io/pypi/pyversions/pyMCR.svg" /></a>
<a class="reference external image-reference" href="https://pypi.org/project/pyMCR/"><img alt="PyPI" src="https://img.shields.io/pypi/v/pyMCR.svg" /></a>
<a class="reference external image-reference" href="https://github.com/CCampJr/pyMCR/blob/master/LICENSE.md"><img alt="NIST Public Domain" src="https://img.shields.io/badge/License-NIST%20Public%20Domain-green.svg" /></a>
<div class="section" id="pymcr-multivariate-curve-resolution-in-python">
<h1>pyMCR: Multivariate Curve Resolution in Python<a class="headerlink" href="#pymcr-multivariate-curve-resolution-in-python" title="Permalink to this headline">¶</a></h1>
<p>pyMCR is a small package for performing multivariate curve resolution.
Currently, it implements a simple alternating least squares method
(i.e., MCR-ALS).</p>
<p>MCR-ALS, in general, is a constrained implementation of alternating
least squares (ALS) nonnegative matrix factorization (NMF). Historically,
other names were used for MCR as well:</p>
<ul class="simple">
<li>Self modeling mixture analysis (SMMA)</li>
<li>Self modeling curve resolution (SMCR)</li>
</ul>
<p>Available methods:</p>
<ul class="simple">
<li>Regressors:<ul>
<li><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.linalg.lstsq.html">Ordinary least squares</a> (default)</li>
<li><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.nnls.html">Non-negatively constrained least squares</a></li>
<li>Native support for <a class="reference external" href="http://scikit-learn.org/stable/modules/linear_model.html">scikit-learn linear model regressors</a>
(e.g., <a class="reference external" href="http://scikit-learn.org/stable/modules/linear_model.html#ordinary-least-squares">LinearRegression</a>,
<a class="reference external" href="http://scikit-learn.org/stable/modules/linear_model.html#ridge-regression">RidgeRegression</a>,
<a class="reference external" href="http://scikit-learn.org/stable/modules/linear_model.html#lasso">Lasso</a>)</li>
</ul>
</li>
<li>Constraints<ul>
<li>Non-negativity</li>
<li>Normalization</li>
<li>Zero end-points</li>
<li>Zero (approx) end-points of cumulative summation (can specify nodes as well)</li>
<li>Non-negativity of cumulative summation</li>
<li>Compress or cut values above or below a threshold value</li>
<li>Replace sum-across-features samples (e.g., 0 concentration) with prescribed target</li>
<li>Enforce a plane (“planarize”). E.g., a concenctration image is a plane.</li>
</ul>
</li>
<li>Error metrics / Loss function<ul>
<li>Mean-squared error</li>
</ul>
</li>
<li>Other options<ul>
<li>Fix known targets (C and/or ST, and let others vary)</li>
</ul>
</li>
</ul>
<p>What it <strong>does</strong> do:</p>
<ul class="simple">
<li>Approximate the concentration and spectral matrices via minimization routines.
This is the core the MCR-ALS methods.</li>
<li>Enable the application of certain constraints in a user-defined order.</li>
</ul>
<p>What it <strong>does not</strong> do:</p>
<ul class="simple">
<li>Estimate the number of components in the sample. This is a bonus feature in
some more-advanced MCR-ALS packages.<ul>
<li>In MATLAB: <a class="reference external" href="https://mcrals.wordpress.com/">https://mcrals.wordpress.com/</a></li>
<li>In R: <a class="reference external" href="https://cran.r-project.org/web/packages/ALS/index.html">https://cran.r-project.org/web/packages/ALS/index.html</a></li>
</ul>
</li>
</ul>
<div class="section" id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p><strong>Note</strong>: These are the developmental system specs. Older versions of certain
packages may work.</p>
<ul class="simple">
<li>python &gt;= 3.4<ul>
<li>Tested with 3.4.6, 3.5.4, 3.6.3, 3.6.5</li>
</ul>
</li>
<li>numpy (1.9.3)<ul>
<li>Tested with 1.12.1, 1.13.1, 1.13.3, 1.14.3</li>
</ul>
</li>
<li>scipy (1.0.0)<ul>
<li>Tested with 1.0.0 and 1.0.1</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="known-issues">
<h2>Known Issues<a class="headerlink" href="#known-issues" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="using-pip-hard-install">
<h3>Using pip (hard install)<a class="headerlink" href="#using-pip-hard-install" title="Permalink to this headline">¶</a></h3>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Only Python 3.* installed</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">pyMCR</span>

<span class="c1"># If you have both Python 2.* and 3.* you may need</span>
<span class="n">pip3</span> <span class="n">install</span> <span class="n">pyMCR</span>
</pre></div>
</div>
</div>
<div class="section" id="using-pip-soft-install-can-update-with-git">
<h3>Using pip (soft install [can update with git])<a class="headerlink" href="#using-pip-soft-install-can-update-with-git" title="Permalink to this headline">¶</a></h3>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Make new directory for pyMCR and enter it</span>
<span class="c1"># Clone from github</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">CCampJr</span><span class="o">/</span><span class="n">pyMCR</span>

<span class="c1"># Only Python 3.* installed</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span>

<span class="c1"># If you have both Python 2.* and 3.* you may need instead</span>
<span class="n">pip3</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span>

<span class="c1"># To update in the future</span>
<span class="n">git</span> <span class="n">pull</span>
</pre></div>
</div>
</div>
<div class="section" id="using-setuptools">
<h3>Using setuptools<a class="headerlink" href="#using-setuptools" title="Permalink to this headline">¶</a></h3>
<p>You will need to <a class="reference external" href="https://github.com/CCampJr/pyMCR">download the repository</a>
or clone the repository with git:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Make new directory for pyMCR and enter it</span>
<span class="c1"># Clone from github</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">CCampJr</span><span class="o">/</span><span class="n">pyMCR</span>
</pre></div>
</div>
<p>Perform the install:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pymcr.mcr</span> <span class="k">import</span> <span class="n">McrAls</span>
<span class="n">mcrals</span> <span class="o">=</span> <span class="n">McrAls</span><span class="p">()</span>

<span class="c1"># MCR assumes a system of the form: D = CS^T</span>
<span class="c1">#</span>
<span class="c1"># Data that you will provide (hyperspectral context):</span>
<span class="c1"># D [n_pixels, n_frequencies]  # Hyperspectral image unraveled in space (2D)</span>
<span class="c1">#</span>
<span class="c1"># initial_spectra [n_components, n_frequencies]  ## S^T in the literature</span>
<span class="c1"># OR</span>
<span class="c1"># initial_conc [n_pixels, n_components]   ## C in the literature</span>

<span class="c1"># If you have an initial estimate of the spectra</span>
<span class="n">mcrals</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="n">ST</span><span class="o">=</span><span class="n">initial_spectra</span><span class="p">)</span>

<span class="c1"># Otherwise, if you have an initial estimate of the concentrations</span>
<span class="n">mcrals</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="n">C</span><span class="o">=</span><span class="n">initial_conc</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Command line and Jupyter notebook examples are provided in the <code class="docutils literal notranslate"><span class="pre">Examples/</span></code> folder.</p>
<p>From <code class="docutils literal notranslate"><span class="pre">Examples/Demo.ipynb</span></code>:</p>
<img alt="./Examples/mcr_spectra_retr.png" src="./Examples/mcr_spectra_retr.png" />
<img alt="./Examples/mcr_conc_retr.png" src="./Examples/mcr_conc_retr.png" />
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://www.jstor.org/stable/1267173">W. H. Lawton and E. A. Sylvestre, “Self Modeling Curve Resolution”,
Technometrics 13, 617–633 (1971).</a></li>
<li><a class="reference external" href="https://mcrals.wordpress.com/theory/">https://mcrals.wordpress.com/theory/</a></li>
<li><a class="reference external" href="http://www.sciencedirect.com/science/article/pii/S0169743904002874">J. Jaumot, R. Gargallo, A. de Juan, and R. Tauler, “A graphical user-friendly
interface for MCR-ALS: a new tool for multivariate curve resolution in
MATLAB”, Chemometrics and Intelligent Laboratory Systems 76, 101-110
(2005).</a></li>
<li><a class="reference external" href="https://www.nature.com/articles/nprot.2015.008">J. Felten, H. Hall, J. Jaumot, R. Tauler, A. de Juan, and A. Gorzsás,
“Vibrational spectroscopic image analysis of biological material using
multivariate curve resolution–alternating least squares (MCR-ALS)”, Nature Protocols
10, 217-240 (2015).</a></li>
</ul>
</div>
<div class="section" id="license">
<h2>LICENSE<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p>This software was developed by employees of the National Institute of Standards
and Technology (NIST), an agency of the Federal Government. Pursuant to
<a class="reference external" href="http://www.copyright.gov/title17/92chap1.html#105">title 17 United States Code Section 105</a>,
works of NIST employees are not subject to copyright protection in the United States and are
considered to be in the public domain. Permission to freely use, copy, modify,
and distribute this software and its documentation without fee is hereby granted,
provided that this notice and disclaimer of warranty appears in all copies.</p>
<p>THE SOFTWARE IS PROVIDED ‘AS IS’ WITHOUT ANY WARRANTY OF ANY KIND, EITHER
EXPRESSED, IMPLIED, OR STATUTORY, INCLUDING, BUT NOT LIMITED TO, ANY WARRANTY
THAT THE SOFTWARE WILL CONFORM TO SPECIFICATIONS, ANY IMPLIED WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND FREEDOM FROM INFRINGEMENT,
AND ANY WARRANTY THAT THE DOCUMENTATION WILL CONFORM TO THE SOFTWARE, OR ANY
WARRANTY THAT THE SOFTWARE WILL BE ERROR FREE. IN NO EVENT SHALL NIST BE LIABLE
FOR ANY DAMAGES, INCLUDING, BUT NOT LIMITED TO, DIRECT, INDIRECT, SPECIAL OR
CONSEQUENTIAL DAMAGES, ARISING OUT OF, RESULTING FROM, OR IN ANY WAY CONNECTED
WITH THIS SOFTWARE, WHETHER OR NOT BASED UPON WARRANTY, CONTRACT, TORT, OR
OTHERWISE, WHETHER OR NOT INJURY WAS SUSTAINED BY PERSONS OR PROPERTY OR
OTHERWISE, AND WHETHER OR NOT LOSS WAS SUSTAINED FROM, OR AROSE OUT OF THE
RESULTS OF, OR USE OF, THE SOFTWARE OR SERVICES PROVIDED HEREUNDER.</p>
</div>
<div class="section" id="contact">
<h2>Contact<a class="headerlink" href="#contact" title="Permalink to this headline">¶</a></h2>
<p>Charles H Camp Jr: <a class="reference external" href="mailto:charles&#46;camp&#37;&#52;&#48;nist&#46;gov">charles<span>&#46;</span>camp<span>&#64;</span>nist<span>&#46;</span>gov</a></p>
</div>
<div class="section" id="contributors">
<h2>Contributors<a class="headerlink" href="#contributors" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Charles H Camp Jr</li>
<li>Charles Le Losq (<a class="reference external" href="mailto:charles&#46;lelosq&#37;&#52;&#48;anu&#46;edu&#46;au">charles<span>&#46;</span>lelosq<span>&#64;</span>anu<span>&#46;</span>edu<span>&#46;</span>au</a>)</li>
<li>Robert Kern (<a class="reference external" href="mailto:rkern&#37;&#52;&#48;enthought&#46;com">rkern<span>&#64;</span>enthought<span>&#46;</span>com</a>)</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">pyMCR: Multivariate Curve Resolution in Python</a><ul>
<li><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li><a class="reference internal" href="#known-issues">Known Issues</a></li>
<li><a class="reference internal" href="#installation">Installation</a><ul>
<li><a class="reference internal" href="#using-pip-hard-install">Using pip (hard install)</a></li>
<li><a class="reference internal" href="#using-pip-soft-install-can-update-with-git">Using pip (soft install [can update with git])</a></li>
<li><a class="reference internal" href="#using-setuptools">Using setuptools</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#references">References</a></li>
<li><a class="reference internal" href="#license">LICENSE</a></li>
<li><a class="reference internal" href="#contact">Contact</a></li>
<li><a class="reference internal" href="#contributors">Contributors</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">pyMCR: Multivariate Curve Resolution in Python</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="installing.html"
                        title="next chapter">Installation</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/readme_link.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="installing.html" title="Installation"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="pyMCR: Multivariate Curve Resolution in Python"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pyMCR 0.3 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    </div>
  </body>
</html>